/*! For license information please see 77.ba979e80.chunk.js.LICENSE.txt */
(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[77],{1228:function(e,t,n){},1245:function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.CheckBox=void 0;var i=n(886),o=n(45),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._WidgetClass=i.default,t.subscribableOptions=["value"],t.independentEvents=["onContentReady","onDisposing","onInitialized","onValueChanged"],t._defaults={defaultValue:"value"},t}return a(t,e),Object.defineProperty(t.prototype,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),t}(n(1001).Component);t.CheckBox=r,r.propTypes={accessKey:o.string,activeStateEnabled:o.bool,disabled:o.bool,elementAttr:o.object,enableThreeStateBehavior:o.bool,focusStateEnabled:o.bool,height:o.oneOfType([o.func,o.number,o.string]),hint:o.string,hoverStateEnabled:o.bool,iconSize:o.oneOfType([o.number,o.string]),isValid:o.bool,name:o.string,onContentReady:o.func,onDisposing:o.func,onInitialized:o.func,onOptionChanged:o.func,onValueChanged:o.func,readOnly:o.bool,rtlEnabled:o.bool,tabIndex:o.number,text:o.string,validationErrors:o.array,validationMessageMode:o.oneOfType([o.string,o.oneOf(["always","auto"])]),validationMessagePosition:o.oneOfType([o.string,o.oneOf(["bottom","left","right","top"])]),validationStatus:o.oneOfType([o.string,o.oneOf(["valid","invalid","pending"])]),visible:o.bool,width:o.oneOfType([o.func,o.number,o.string])},t.default=r},1321:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(43),o=n(36),r=n(3),c=n(223),l=n(941),d=n(0),s=n(2),u=n(4),p=n(23),b=n(641),j=n(810),f=n(811),y=n(1280),m=(n(1228),n(963)),O=n(725),g=n(137),x=n.n(g),h=(n(1245),n(85)),v=n(12),w=function(e){var t,n=Object(a.useState)({}),i=Object(p.a)(n,2),o=i[0],r=i[1],c=Object(a.useState)({}),l=Object(p.a)(c,2),d=l[0],b=l[1],j=Object(a.useState)(),f=Object(p.a)(j,2),y=f[0],O=f[1],g=window.location.pathname.split("planning/").pop().replace("/daily",""),x=function(){var n=Object(u.a)(Object(s.a)().mark((function n(){return Object(s.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.find(g);case 2:t=n.sent,b(t),t.line.map((function(t){t.name===e.data.lineParent&&(t.product.map((function(t){t.days.map((function(t,n){e.header.toLowerCase().includes(t.day)&&O(n)}))})),r(t))}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Object(a.useEffect)((function(){x()}),[e]);var w=function(){var e=Object(u.a)(Object(s.a)().mark((function e(t){var n,a,i,r,c,l;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=52;break}if(!Object.values(t[0].data)[0].quantity){e.next=13;break}return i=d,e.next=5,d.line.map((function(e,t){e.name===o.name&&(a=t)}));case 5:return e.next=7,d.line[a].product.map((function(e,a){t[0].key.id===e.id&&(n=a)}));case 7:return i.line[a].product[n].days[y].quantity=Object.values(t[0].data)[0].quantity,e.next=10,h.a.update(g,i);case 10:x(),e.next=52;break;case 13:if(!Object.values(t[0].data)[0].priority){e.next=25;break}return i=d,e.next=17,d.line.map((function(e,t){e.name===o.name&&(a=t)}));case 17:return e.next=19,d.line[a].product.map((function(e,a){t[0].key.id===e.id&&(n=a)}));case 19:return i.line[a].product[n].days[y].priority=Object.values(t[0].data)[0].priority,e.next=22,h.a.update(g,i);case 22:x(),e.next=52;break;case 25:if("priorityChecked"!==Object.keys(Object.values(t[0].data)[0])[0]){e.next=52;break}return i=d,r=0,c=0,e.next=31,d.line.map((function(e,t){e.name===o.name&&(a=t)}));case 31:return e.next=33,d.line[a].product.map((function(e,a){t[0].key.id===e.id&&(n=a),e.days[y].priorityChecked&&r++,null!==e.days[y].priority&&e.days[y].priority>c&&(c=e.days[y].priority)}));case 33:if(console.log("checked",r),console.log("maxPriority",c),!0!==Object.values(t[0].data)[0].priorityChecked){e.next=48;break}if(0!==r){e.next=40;break}null===i.line[a].product[n].days[y].priority&&(i.line[a].product[n].days[y].priority=c+1),e.next=48;break;case 40:if(null!==i.line[a].product[n].days[y].priority){e.next=44;break}i.line[a].product[n].days[y].priority=c+1,e.next=48;break;case 44:return l=i.line[a].product[n].days[y].priority,e.next=47,d.line[a].product.map((function(e){e.days[y].priority===r+1&&(e.days[y].priority=l)}));case 47:i.line[a].product[n].days[y].priority=r+1;case 48:return i.line[a].product[n].days[y].priorityChecked=Object.values(t[0].data)[0].priorityChecked,e.next=51,h.a.update(g,i);case 51:x();case 52:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(m.DataGrid,{dataSource:o.product,showBorders:!0,columnAutoWidth:!0,allowColumnResizing:!0,columnResizingMode:"widget",onCellPrepared:function(e){"Quantity"===e.column.caption&&"data"===e.rowType&&(e.cellElement.style.background="#0aa3a3"),"Priority"===e.column.caption&&"data"===e.rowType&&(e.cellElement.style.background="#0aa3a3")},children:[Object(v.jsx)(m.Selection,{mode:"single"}),Object(v.jsx)(m.Editing,{allowUpdating:!0,allowAdding:!1,allowDeleting:!1,mode:"cell",onChangesChange:function(e){return w(e)}}),Object(v.jsx)(m.ColumnChooser,{enabled:!0,mode:"select"}),Object(v.jsx)(m.Column,{dataField:"familyParent",allowEditing:!1}),Object(v.jsx)(m.Column,{dataField:"id",allowEditing:!1}),Object(v.jsx)(m.Column,{caption:"SB",dataField:"subassembly",dataType:"boolean",allowEditing:!1}),Object(v.jsx)(m.Column,{caption:"FG",dataField:"finishGood",dataType:"boolean",allowEditing:!1}),Object(v.jsx)(m.Column,{dataField:"quantityRequested",allowEditing:!1}),Object(v.jsxs)(m.Column,{caption:"Quantity Planned",allowEditing:!1,children:[Object(v.jsx)(m.Column,{caption:"Current Line",dataField:"quantity",allowEditing:!1,cellRender:function(e){return function(e){var t=0;return e.data.days.map((function(e){t+=e.quantity})),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{children:t})})}(e)}}),Object(v.jsx)(m.Column,{caption:"Other Lines",dataField:"otherLines",allowEditing:!1,cellRender:function(e){return function(e){var t=0,n=d;return 1===e.data.lineParent.length?t=0:n.line.map((function(n){n.name!==o.name&&e.data.lineParent.includes(n.name)&&n.product.map((function(n){n.days.map((function(a){n.id===e.data.id&&(t+=a.quantity)}))}))})),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{children:t})})}(e)}})]}),Object(v.jsx)(m.Column,{dataField:"quantityRemained",allowEditing:!1,cellRender:function(e){return function(e){var t=0;return e.data.days.map((function(e){t+=e.quantity})),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{children:e.data.quantityRequested>=t?e.data.quantityRequested-t:0})})}(e)}}),Object(v.jsx)(m.Column,{caption:"Quantity",dataField:"days[".concat(y,"].quantity"),allowEditing:!0}),Object(v.jsx)(m.Column,{caption:"Priority",dataField:"days[".concat(y,"].priority"),dataType:"number",allowEditing:!0}),Object(v.jsx)(m.Column,{caption:"",dataField:"days[".concat(y,"].priorityChecked"),dataType:"boolean",allowEditing:!0})]})},C=n(82),E=n(841),k=function(e){var t=Object(i.d)(),n=Object(o.h)(),g=Object(i.e)(l.a.selectLoading),h=Object(i.e)(l.a.selectRecord),k=Object(a.useState)(!1),P=Object(p.a)(k,2),Y=P[0],D=P[1],S=Object(a.useState)(""),R=Object(p.a)(S,2),T=R[0],F=R[1],M=Object(a.useState)({}),I=Object(p.a)(M,2),q=I[0],z=I[1];Object(a.useEffect)((function(){Y||t(c.a.doFind(n.params.id))}),[!Y]);var _=Object(a.useState)([{familyParent:"",zapParent:"",lineParent:""}]),B=Object(p.a)(_,2),L=B[0],G=B[1],W=function(){var e=Object(u.a)(Object(s.a)().mark((function e(){var t,n,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{familyParent:"",zapParent:"",lineParent:""}],n={familyParent:"",zapParent:"",lineParent:""},e.next=4,C.a.find(h.config.id);case 4:(a=e.sent).family.map((function(e){e.linesId.map((function(i){n={familyParent:e.famId.famTitle,zapParent:"",lineParent:i.lineId.lineTitle},a.zapId.map((function(e){e.linesId.map((function(t){t.lineTitle===i.lineId.lineTitle&&(n.zapParent=e.zapTitle)}))})),t.push(n)}))})),t.shift(),G(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(Object(a.useEffect)((function(){!g&&h&&W()}),[!g&&h]),g||!h)return Object(v.jsx)(b.a,{});function A(){var e=new Date(null===h||void 0===h?void 0:h.year,0,1+7*((null===h||void 0===h?void 0:h.week)-1)),t=e.getDay(),n=e;return t<=4?n.setDate(e.getDate()-e.getDay()+1):n.setDate(e.getDate()+8-e.getDay()),n}var V=function(e){var t=e.data.lineParent,n=[{priority:0,quantity:0,name:""}];h.line.map((function(a){a.name===t&&a.product.map((function(t){t.days.map((function(a,i){if(e.column.caption.toLowerCase().includes(a.day)&&t.days[i].quantity>0&&null!==t.days[i].priority){var o={priority:t.days[i].priority,quantity:t.days[i].quantity,name:t.id};n.push(o)}}))}))})),n.shift();var a=n.sort((function(e,t){return e.priority-t.priority}));return Object(v.jsx)(v.Fragment,{children:a.map((function(e){return Object(v.jsx)("div",{children:Object(v.jsx)("li",{children:"".concat(e.priority,". ").concat(e.name,": ").concat(e.quantity)})})}))})};return Object(v.jsxs)(O.a,{children:[Object(v.jsxs)(j.a,{gutter:24,children:[Boolean(h.name)&&Object(v.jsx)(f.a,{span:6,children:Object(v.jsx)(y.a.Item,Object(d.a)(Object(d.a)({},O.b),{},{label:Object(r.c)("entities.planning.fields.name"),children:h.name}))}),Boolean(h.year)&&Object(v.jsx)(f.a,{span:6,children:Object(v.jsx)(y.a.Item,Object(d.a)(Object(d.a)({},O.b),{},{label:Object(r.c)("entities.planning.fields.year"),children:h.year}))}),Boolean(h.week)&&Object(v.jsx)(f.a,{span:6,children:Object(v.jsx)(y.a.Item,Object(d.a)(Object(d.a)({},O.b),{},{label:Object(r.c)("entities.planning.fields.week"),children:h.week}))}),Boolean(h.status)&&Object(v.jsx)(f.a,{span:6,children:Object(v.jsx)(y.a.Item,Object(d.a)(Object(d.a)({},O.b),{},{label:Object(r.c)("entities.planning.fields.status"),children:Object(r.c)("entities.planning.enumerators.status.".concat(h.status))}))})]}),Object(v.jsxs)(m.DataGrid,{dataSource:L,allowColumnReordering:!0,columnWidth:"auto",showBorders:!0,width:"100%",columnResizingMode:"widget",showRowLines:!0,onCellClick:function(e){var t;"data"===(t=e).rowType&&"Line"!==t.column.caption&&(F(t.column.caption),z(t.data),D(!0))},onRowPrepared:function(e){0===e.groupIndex?e.rowElement.style.background="#0aa3a3":1===e.groupIndex&&(e.rowElement.style.background="#00383B")},children:[Object(v.jsx)(m.ColumnChooser,{enabled:!0,mode:"select"}),Object(v.jsx)(m.Selection,{mode:"single"}),Object(v.jsx)(m.GroupPanel,{visible:!1}),Object(v.jsx)(m.Grouping,{autoExpandAll:!0,expandMode:"rowClick"}),Object(v.jsx)(m.Column,{caption:"Zap",dataField:"zapParent",allowEditing:!1,groupIndex:0}),Object(v.jsx)(m.Column,{caption:"Family",dataField:"familyParent",allowEditing:!1,groupIndex:1}),Object(v.jsx)(m.Column,{caption:"Line",dataField:"lineParent",allowEditing:!1}),Object(v.jsx)(m.Column,{caption:"Monday: ".concat(x()(A()).format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return V(e)}}),Object(v.jsx)(m.Column,{caption:"Tuesday: ".concat(x()(A()).add(1,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return V(e)}}),Object(v.jsx)(m.Column,{caption:"Wednesday: ".concat(x()(A()).add(2,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return V(e)}}),Object(v.jsx)(m.Column,{caption:"Thursday: ".concat(x()(A()).add(3,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return V(e)}}),Object(v.jsx)(m.Column,{caption:"Friday: ".concat(x()(A()).add(4,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return V(e)}}),Object(v.jsx)(m.Column,{caption:"Saturday: ".concat(x()(A()).add(5,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return V(e)}}),Object(v.jsx)(m.Column,{caption:"Sunday: ".concat(x()(A()).add(6,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return V(e)}}),Object(v.jsx)(m.Scrolling,{}),Object(v.jsx)(m.Paging,{defaultPageSize:100}),Object(v.jsx)(m.Pager,{visible:!0,allowedPageSizes:!0,displayMode:"full",showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0}),Object(v.jsx)(m.Summary,{children:Object(v.jsx)(m.GroupItem,{column:"id",summaryType:"count"})})]}),Object(v.jsx)(E.a,{width:"1200px",title:T,visible:Y,onOk:function(){D(!1)},onCancel:function(){D(!1)},children:Object(v.jsx)(w,{data:q,header:T})})]})},P=n(617),Y=n(619),D=n(618);t.default=function(e){var t=Object(i.d)(),n=Object(o.h)(),d=Object(i.e)(l.a.selectLoading),s=Object(i.e)(l.a.selectRecord);return Object(a.useEffect)((function(){t(c.a.doFind(n.params.id))}),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Y.a,{items:[[Object(r.c)("dashboard.menu"),"/"],[Object(r.c)("entities.planning.menu"),"/planning"],[Object(r.c)("entities.planning.daily")]]}),Object(v.jsxs)(P.a,{children:[Object(v.jsxs)(j.a,{children:[Object(v.jsx)(f.a,{span:16,children:Object(v.jsx)(D.a,{children:Object(r.c)("entities.planning.daily")})}),Object(v.jsx)(f.a,{span:8,style:{textAlign:"end"}})]}),Object(v.jsx)(k,{loading:d,record:s})]})]})}},617:function(e,t,n){"use strict";var a,i=n(183),o=n(184).a.div(a||(a=Object(i.a)(["\n  margin: 0px;\n  margin-top: 16px;\n  padding: 24px;\n  border-radius: 5px;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  overflow-y: hidden;\n"])));t.a=o},618:function(e,t,n){"use strict";var a,i=n(183),o=n(184).a.h1(a||(a=Object(i.a)(["\n  margin-bottom: 36px;\n"])));t.a=o},619:function(e,t,n){"use strict";var a=n(663),i=(n(1),n(95)),o=n(12);t.a=function(e){var t=function(e){return e.length>1};return Object(o.jsx)(a.a,{children:e.items.map((function(e){return Object(o.jsx)(a.a.Item,{children:t(e)?Object(o.jsx)(i.a,{to:e[1],children:e[0]}):e[0]},e[0])}))})}},630:function(e,t,n){"use strict";var a;function i(e){if("undefined"===typeof document)return 0;if(e||void 0===a){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),i=n.style;i.position="absolute",i.top="0",i.left="0",i.pointerEvents="none",i.visibility="hidden",i.width="200px",i.height="150px",i.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var o=t.offsetWidth;n.style.overflow="scroll";var r=t.offsetWidth;o===r&&(r=n.clientWidth),document.body.removeChild(n),a=o-r}return a}n.d(t,"a",(function(){return i}))},641:function(e,t,n){"use strict";var a=n(649),i=(n(1),n(12));t.a=function(e){return Object(i.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:Object(i.jsx)(a.a,{})})}},725:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a,i=n(183),o=n(184).a.div(a||(a=Object(i.a)(["\n  padding: 24px;\n  padding-top: 0;\n  padding-bottom: 0;\n\n  .ant-form-item-label {\n    white-space: normal;\n  }\n\n  .ant-row {\n    margin-bottom: 8px;\n  }\n"]))),r={labelCol:{md:{span:6},lg:{span:4}},wrapperCol:{md:{span:18},lg:{span:12}}};t.a=o},941:function(e,t,n){"use strict";var a=n(5),i=function(e){return e.planning.view},o=Object(a.a)([i],(function(e){return e.record})),r={selectLoading:Object(a.a)([i],(function(e){return Boolean(e.loading)})),selectRecord:o,selectRaw:i};t.a=r}}]);