/*! For license information please see 79.df40b713.chunk.js.LICENSE.txt */
(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[79],{1249:function(e,t,n){},1266:function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.CheckBox=void 0;var i=n(897),r=n(47),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._WidgetClass=i.default,t.subscribableOptions=["value"],t.independentEvents=["onContentReady","onDisposing","onInitialized","onValueChanged"],t._defaults={defaultValue:"value"},t}return a(t,e),Object.defineProperty(t.prototype,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),t}(n(1013).Component);t.CheckBox=o,o.propTypes={accessKey:r.string,activeStateEnabled:r.bool,disabled:r.bool,elementAttr:r.object,enableThreeStateBehavior:r.bool,focusStateEnabled:r.bool,height:r.oneOfType([r.func,r.number,r.string]),hint:r.string,hoverStateEnabled:r.bool,iconSize:r.oneOfType([r.number,r.string]),isValid:r.bool,name:r.string,onContentReady:r.func,onDisposing:r.func,onInitialized:r.func,onOptionChanged:r.func,onValueChanged:r.func,readOnly:r.bool,rtlEnabled:r.bool,tabIndex:r.number,text:r.string,validationErrors:r.array,validationMessageMode:r.oneOfType([r.string,r.oneOf(["always","auto"])]),validationMessagePosition:r.oneOfType([r.string,r.oneOf(["bottom","left","right","top"])]),validationStatus:r.oneOfType([r.string,r.oneOf(["valid","invalid","pending"])]),visible:r.bool,width:r.oneOfType([r.func,r.number,r.string])},t.default=o},1341:function(e,t,n){"use strict";n.r(t);var a=n(11),i=n(2),r=n(45),o=n(37),c=n(3),l=n(230),d=n(953),u=n(0),s=n(1),p=n.n(s),b=n(4),f=n(199),j=n(645),y=n(815),m=n(816),O=n(1301),g=(n(1249),n(975)),x=n(727),h=n(141),v=n.n(h),w=(n(1266),n(87)),C=function(e){var t,n=Object(i.useState)({}),r=Object(f.a)(n,2),o=r[0],c=r[1],l=Object(i.useState)({}),d=Object(f.a)(l,2),u=d[0],s=d[1],j=Object(i.useState)(),y=Object(f.a)(j,2),m=y[0],O=y[1],x=window.location.pathname.split("planning/").pop().replace("/daily",""),h=function(){var n=Object(b.a)(p.a.mark((function n(){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.find(x);case 2:t=n.sent,s(t),t.line.map((function(t){t.name===e.data.lineParent&&(t.product.map((function(t){t.days.map((function(t,n){e.header.toLowerCase().includes(t.day)&&O(n)}))})),c(t))})),e.onSubmit(t);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Object(i.useEffect)((function(){h()}),[e]);var v=function(){var t=Object(b.a)(p.a.mark((function t(n){var a,i,r,c,l,d,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.length>0)){t.next=49;break}if(!Object.values(n[0].data)[0].quantity){t.next=10;break}return r=u,t.next=5,u.line.map((function(e,t){e.name===o.name&&(i=t)}));case 5:return t.next=7,u.line[i].product.map((function(e,t){n[0].key.id===e.id&&(a=t)}));case 7:r.line[i].product[a].days[m].quantity=Object.values(n[0].data)[0].quantity,t.next=48;break;case 10:if(!Object.values(n[0].data)[0].priority){t.next=19;break}return r=u,t.next=14,u.line.map((function(e,t){e.name===o.name&&(i=t)}));case 14:return t.next=16,u.line[i].product.map((function(e,t){n[0].key.id===e.id&&(a=t)}));case 16:r.line[i].product[a].days[m].priority=Object.values(n[0].data)[0].priority,t.next=48;break;case 19:if("priorityChecked"!==Object.keys(Object.values(n[0].data)[0])[0]){t.next=48;break}return r=u,c=0,l=0,t.next=25,u.line.map((function(e,t){e.name===o.name&&(i=t)}));case 25:return t.next=27,u.line[i].product.map((function(e,t){n[0].key.id===e.id&&(a=t),e.days[m].priorityChecked&&c++,null!==e.days[m].priority&&e.days[m].priority>l&&(l=e.days[m].priority)}));case 27:if(!0!==Object.values(n[0].data)[0].priorityChecked){t.next=47;break}if(0!==c){t.next=39;break}if(null!==r.line[i].product[a].days[m].priority){t.next=33;break}r.line[i].product[a].days[m].priority=l+1,t.next=37;break;case 33:return d=r.line[i].product[a].days[m].priority,t.next=36,u.line[i].product.map((function(e){e.days[m].priority===c+1&&(e.days[m].priority=d)}));case 36:r.line[i].product[a].days[m].priority=c+1;case 37:t.next=47;break;case 39:if(null!==r.line[i].product[a].days[m].priority){t.next=43;break}r.line[i].product[a].days[m].priority=l+1,t.next=47;break;case 43:return s=r.line[i].product[a].days[m].priority,t.next=46,u.line[i].product.map((function(e){e.days[m].priority===c+1&&(e.days[m].priority=s)}));case 46:r.line[i].product[a].days[m].priority=c+1;case 47:r.line[i].product[a].days[m].priorityChecked=Object.values(n[0].data)[0].priorityChecked;case 48:e.onSubmit(r);case 49:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)(g.DataGrid,{dataSource:o.product,showBorders:!0,columnAutoWidth:!0,allowColumnResizing:!0,columnResizingMode:"widget",onCellPrepared:function(e){"Quantity"===e.column.caption&&"data"===e.rowType&&(e.cellElement.style.background="#0aa3a3"),"Priority"===e.column.caption&&"data"===e.rowType&&(e.cellElement.style.background="#0aa3a3")},children:[Object(a.jsx)(g.Selection,{mode:"single"}),Object(a.jsx)(g.Editing,{allowUpdating:!0,allowAdding:!1,allowDeleting:!1,mode:"cell",onChangesChange:function(e){return v(e)}}),Object(a.jsx)(g.ColumnChooser,{enabled:!0,mode:"select"}),Object(a.jsx)(g.Column,{dataField:"familyParent",allowEditing:!1}),Object(a.jsx)(g.Column,{dataField:"id",allowEditing:!1}),Object(a.jsx)(g.Column,{caption:"SB",dataField:"subassembly",dataType:"boolean",allowEditing:!1}),Object(a.jsx)(g.Column,{caption:"FG",dataField:"finishGood",dataType:"boolean",allowEditing:!1}),Object(a.jsx)(g.Column,{dataField:"quantityRequested",allowEditing:!1}),Object(a.jsxs)(g.Column,{caption:"Quantity Planned",allowEditing:!1,children:[Object(a.jsx)(g.Column,{caption:"Current Line",dataField:"quantity",allowEditing:!1,cellRender:function(e){return function(e){var t=0;return e.data.days.map((function(e){t+=e.quantity})),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{children:t})})}(e)}}),Object(a.jsx)(g.Column,{caption:"Other Lines",dataField:"otherLines",allowEditing:!1,cellRender:function(e){return function(e){var t=0,n=u;return 1===e.data.lineParent.length?t=0:n.line.map((function(n){n.name!==o.name&&e.data.lineParent.includes(n.name)&&n.product.map((function(n){n.days.map((function(a){n.id===e.data.id&&(t+=a.quantity)}))}))})),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{children:t})})}(e)}})]}),Object(a.jsx)(g.Column,{dataField:"quantityRemained",allowEditing:!1,cellRender:function(e){return function(e){var t=0;return e.data.days.map((function(e){t+=e.quantity})),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{children:e.data.quantityRequested>=t?e.data.quantityRequested-t:0})})}(e)}}),Object(a.jsx)(g.Column,{caption:"Quantity",dataField:"days[".concat(m,"].quantity"),allowEditing:!0}),Object(a.jsx)(g.Column,{caption:"Priority",dataField:"days[".concat(m,"].priority"),dataType:"number",allowEditing:!0}),Object(a.jsx)(g.Column,{caption:"",dataField:"days[".concat(m,"].priorityChecked"),dataType:"boolean",allowEditing:!0})]})},k=n(86),E=n(844),P=function(e){var t=Object(r.d)(),n=Object(o.h)(),s=Object(r.e)(d.a.selectLoading),h=Object(r.e)(d.a.selectRecord),P=Object(i.useState)(!1),S=Object(f.a)(P,2),R=S[0],Y=S[1],D=Object(i.useState)(""),T=Object(f.a)(D,2),F=T[0],I=T[1],M=Object(i.useState)({}),q=Object(f.a)(M,2),z=q[0],_=q[1],B=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("newRecord")||null)){e.next=4;break}return e.next=4,w.a.update(h.id,JSON.parse(t));case 4:Y(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){R||t(l.a.doFind(n.params.id))}),[!R]);var L=Object(i.useState)([{familyParent:"",zapParent:"",lineParent:""}]),G=Object(f.a)(L,2),W=G[0],A=G[1],J=function(){var e=Object(b.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{familyParent:"",zapParent:"",lineParent:""}],n={familyParent:"",zapParent:"",lineParent:""},e.next=4,k.a.find(h.config.id);case 4:(a=e.sent).family.map((function(e){e.linesId.map((function(i){n={familyParent:e.famId.famTitle,zapParent:"",lineParent:i.lineId.lineTitle},a.zapId.map((function(e){e.linesId.map((function(t){t.lineTitle===i.lineId.lineTitle&&(n.zapParent=e.zapTitle)}))})),t.push(n)}))})),t.shift(),A(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(Object(i.useEffect)((function(){!s&&h&&J()}),[!s&&h]),s||!h)return Object(a.jsx)(j.a,{});function V(){var e=new Date(null===h||void 0===h?void 0:h.year,0,1+7*((null===h||void 0===h?void 0:h.week)-1)),t=e.getDay(),n=e;return t<=4?n.setDate(e.getDate()-e.getDay()+1):n.setDate(e.getDate()+8-e.getDay()),n}var N=function(e){var t=e.data.lineParent,n=[{priority:0,quantity:0,name:""}];h.line.map((function(a){a.name===t&&a.product.map((function(t){t.days.map((function(a,i){if(e.column.caption.toLowerCase().includes(a.day)&&t.days[i].quantity>0&&null!==t.days[i].priority){var r={priority:t.days[i].priority,quantity:t.days[i].quantity,name:t.id};n.push(r)}}))}))})),n.shift();var i=n.sort((function(e,t){return e.priority-t.priority}));return Object(a.jsx)(a.Fragment,{children:i.map((function(e){return Object(a.jsx)("div",{children:Object(a.jsx)("li",{children:"".concat(e.priority,". ").concat(e.name,": ").concat(e.quantity)})})}))})};return Object(a.jsxs)(x.a,{children:[Object(a.jsxs)(y.a,{gutter:24,children:[Boolean(h.name)&&Object(a.jsx)(m.a,{span:6,children:Object(a.jsx)(O.a.Item,Object(u.a)(Object(u.a)({},x.b),{},{label:Object(c.c)("entities.planning.fields.name"),children:h.name}))}),Boolean(h.year)&&Object(a.jsx)(m.a,{span:6,children:Object(a.jsx)(O.a.Item,Object(u.a)(Object(u.a)({},x.b),{},{label:Object(c.c)("entities.planning.fields.year"),children:h.year}))}),Boolean(h.week)&&Object(a.jsx)(m.a,{span:6,children:Object(a.jsx)(O.a.Item,Object(u.a)(Object(u.a)({},x.b),{},{label:Object(c.c)("entities.planning.fields.week"),children:h.week}))}),Boolean(h.status)&&Object(a.jsx)(m.a,{span:6,children:Object(a.jsx)(O.a.Item,Object(u.a)(Object(u.a)({},x.b),{},{label:Object(c.c)("entities.planning.fields.status"),children:Object(c.c)("entities.planning.enumerators.status.".concat(h.status))}))})]}),Object(a.jsxs)(g.DataGrid,{dataSource:W,allowColumnReordering:!0,columnWidth:"auto",showBorders:!0,width:"100%",columnResizingMode:"widget",showRowLines:!0,onCellClick:function(e){var t;"data"===(t=e).rowType&&"Line"!==t.column.caption&&(I(t.column.caption),_(t.data),Y(!0))},onRowPrepared:function(e){0===e.groupIndex?e.rowElement.style.background="#0aa3a3":1===e.groupIndex&&(e.rowElement.style.background="#00383B")},children:[Object(a.jsx)(g.ColumnChooser,{enabled:!0,mode:"select"}),Object(a.jsx)(g.Selection,{mode:"single"}),Object(a.jsx)(g.GroupPanel,{visible:!1}),Object(a.jsx)(g.Grouping,{autoExpandAll:!0,expandMode:"rowClick"}),Object(a.jsx)(g.Column,{caption:"Zap",dataField:"zapParent",allowEditing:!1,groupIndex:0}),Object(a.jsx)(g.Column,{caption:"Family",dataField:"familyParent",allowEditing:!1,groupIndex:1}),Object(a.jsx)(g.Column,{caption:"Line",dataField:"lineParent",allowEditing:!1}),Object(a.jsx)(g.Column,{caption:"Monday: ".concat(v()(V()).format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return N(e)}}),Object(a.jsx)(g.Column,{caption:"Tuesday: ".concat(v()(V()).add(1,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return N(e)}}),Object(a.jsx)(g.Column,{caption:"Wednesday: ".concat(v()(V()).add(2,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return N(e)}}),Object(a.jsx)(g.Column,{caption:"Thursday: ".concat(v()(V()).add(3,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return N(e)}}),Object(a.jsx)(g.Column,{caption:"Friday: ".concat(v()(V()).add(4,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return N(e)}}),Object(a.jsx)(g.Column,{caption:"Saturday: ".concat(v()(V()).add(5,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return N(e)}}),Object(a.jsx)(g.Column,{caption:"Sunday: ".concat(v()(V()).add(6,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return N(e)}}),Object(a.jsx)(g.Scrolling,{}),Object(a.jsx)(g.Paging,{defaultPageSize:100}),Object(a.jsx)(g.Pager,{visible:!0,allowedPageSizes:!0,displayMode:"full",showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0}),Object(a.jsx)(g.Summary,{children:Object(a.jsx)(g.GroupItem,{column:"id",summaryType:"count"})})]}),Object(a.jsx)(E.a,{width:"1200px",title:F,visible:R,onOk:B,onCancel:function(){Y(!1)},children:Object(a.jsx)(C,{data:z,header:F,onSubmit:function(e){localStorage.setItem("newRecord",JSON.stringify(e))}})})]})},S=n(621),R=n(623),Y=n(622);t.default=function(e){var t=Object(r.d)(),n=Object(o.h)(),u=Object(r.e)(d.a.selectLoading),s=Object(r.e)(d.a.selectRecord);return Object(i.useEffect)((function(){t(l.a.doFind(n.params.id))}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(R.a,{items:[[Object(c.c)("dashboard.menu"),"/"],[Object(c.c)("entities.planning.menu"),"/planning"],[Object(c.c)("entities.planning.daily")]]}),Object(a.jsxs)(S.a,{children:[Object(a.jsxs)(y.a,{children:[Object(a.jsx)(m.a,{span:16,children:Object(a.jsx)(Y.a,{children:Object(c.c)("entities.planning.daily")})}),Object(a.jsx)(m.a,{span:8,style:{textAlign:"end"}})]}),Object(a.jsx)(P,{loading:u,record:s})]})]})}},621:function(e,t,n){"use strict";var a=n(184);function i(){var e=Object(a.a)(["\n  margin: 0px;\n  margin-top: 16px;\n  padding: 24px;\n  border-radius: 5px;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  overflow-y: hidden;\n"]);return i=function(){return e},e}var r=n(185).a.div(i());t.a=r},622:function(e,t,n){"use strict";var a=n(184);function i(){var e=Object(a.a)(["\n  margin-bottom: 36px;\n"]);return i=function(){return e},e}var r=n(185).a.h1(i());t.a=r},623:function(e,t,n){"use strict";var a=n(11),i=n(667),r=(n(2),n(99));t.a=function(e){var t=function(e){return e.length>1};return Object(a.jsx)(i.a,{children:e.items.map((function(e){return Object(a.jsx)(i.a.Item,{children:t(e)?Object(a.jsx)(r.a,{to:e[1],children:e[0]}):e[0]},e[0])}))})}},634:function(e,t,n){"use strict";var a;function i(e){if("undefined"===typeof document)return 0;if(e||void 0===a){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),i=n.style;i.position="absolute",i.top=0,i.left=0,i.pointerEvents="none",i.visibility="hidden",i.width="200px",i.height="150px",i.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var r=t.offsetWidth;n.style.overflow="scroll";var o=t.offsetWidth;r===o&&(o=n.clientWidth),document.body.removeChild(n),a=r-o}return a}n.d(t,"a",(function(){return i}))},645:function(e,t,n){"use strict";var a=n(11),i=n(653);n(2);t.a=function(e){return Object(a.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:Object(a.jsx)(i.a,{})})}},727:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var a=n(184);function i(){var e=Object(a.a)(["\n  padding: 24px;\n  padding-top: 0;\n  padding-bottom: 0;\n\n  .ant-form-item-label {\n    white-space: normal;\n  }\n\n  .ant-row {\n    margin-bottom: 8px;\n  }\n"]);return i=function(){return e},e}var r=n(185).a.div(i()),o={labelCol:{md:{span:6},lg:{span:4}},wrapperCol:{md:{span:18},lg:{span:12}}};t.a=r},953:function(e,t,n){"use strict";var a=n(5),i=function(e){return e.planning.view},r=Object(a.a)([i],(function(e){return e.record})),o={selectLoading:Object(a.a)([i],(function(e){return Boolean(e.loading)})),selectRecord:r,selectRaw:i};t.a=o}}]);