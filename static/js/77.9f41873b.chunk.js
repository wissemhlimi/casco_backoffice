/*! For license information please see 77.9f41873b.chunk.js.LICENSE.txt */
(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[77],{1232:function(e,t,n){},1249:function(e,t,n){"use strict";var a=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var i=n(818),o=n(46),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._WidgetClass=i.default,t.independentEvents=["onClick","onContentReady","onDisposing","onInitialized"],t._templateProps=[{tmplOption:"template",render:"render",component:"component",keyFn:"keyFn"}],t}return a(t,e),Object.defineProperty(t.prototype,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),t}(n(997).Component);t.Button=c,c.propTypes={accessKey:o.string,activeStateEnabled:o.bool,disabled:o.bool,elementAttr:o.object,focusStateEnabled:o.bool,height:o.oneOfType([o.func,o.number,o.string]),hint:o.string,hoverStateEnabled:o.bool,icon:o.string,onClick:o.func,onContentReady:o.func,onDisposing:o.func,onInitialized:o.func,onOptionChanged:o.func,rtlEnabled:o.bool,stylingMode:o.oneOfType([o.string,o.oneOf(["text","outlined","contained"])]),tabIndex:o.number,text:o.string,type:o.oneOfType([o.string,o.oneOf(["back","danger","default","normal","success"])]),useSubmitBehavior:o.bool,validationGroup:o.string,visible:o.bool,width:o.oneOfType([o.func,o.number,o.string])},t.default=c},1325:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),o=n(43),c=n(36),r=n(4),l=n(223),d=n(944),s=n(0),u=n(2),p=n(3),j=n(23),b=n(647),f=n(815),m=n(816),O=n(1284),y=(n(1232),n(965)),g=n(731),x=n(106),h=n.n(x),v=n(1249),w=n(85),C=n(12),E=function(e){var t,n=Object(a.useState)({}),o=Object(j.a)(n,2),c=o[0],r=o[1],l=Object(a.useState)({}),d=Object(j.a)(l,2),s=d[0],b=d[1],O=Object(a.useState)(),g=Object(j.a)(O,2),x=g[0],h=g[1],E=window.location.pathname.split("planning/").pop().replace("/daily",""),P=function(){var n=Object(p.a)(Object(u.a)().mark((function n(){return Object(u.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.find(E);case 2:t=n.sent,b(t),t.line.map((function(t){t.name===e.data.lineParent&&(t.product.map((function(t){t.days.map((function(t,n){e.header.toLowerCase().includes(t.day)&&h(n)}))})),r(t))}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Object(a.useEffect)((function(){P()}),[e]);var R=function(){var e=Object(p.a)(Object(u.a)().mark((function e(t,n){var a,i,o,r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=0,r=s,e.next=4,s.line.map((function(e,t){e.name===c.name&&(i=t)}));case 4:return e.next=6,s.line[i].product.map((function(e,t){n.data.id===e.id&&(a=t)}));case 6:return e.next=8,c.product.map((function(e){null!==e.days[x].priority&&e.days[x].priority>o&&(o=e.days[x].priority)}));case 8:return null===r.line[i].product[a].days[x].priority?r.line[i].product[a].days[x].priority=o+1:r.line[i].product[a].days[x].priority!==o&&r.line[i].product.map((function(e){e.days[x].priority===o&&(e.days[x].priority=r.line[i].product[a].days[x].priority,r.line[i].product[a].days[x].priority=o)})),e.next=11,w.a.update(E,r);case 11:P();case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(p.a)(Object(u.a)().mark((function e(t){var n,a,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=10;break}return i=s,e.next=4,s.line.map((function(e,t){e.name===c.name&&(a=t)}));case 4:return e.next=6,s.line[a].product.map((function(e,a){t[0].key.id===e.id&&(n=a)}));case 6:return i.line[a].product[n].days[x].quantity=Object.values(t[0].data)[0].quantity,e.next=9,w.a.update(E,i);case 9:P();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)(i.a.Fragment,{children:Object(C.jsxs)(y.DataGrid,{dataSource:c.product,showBorders:!0,columnAutoWidth:!0,allowColumnResizing:!0,columnResizingMode:"widget",onCellPrepared:function(e){"Quantity"===e.column.caption&&"data"===e.rowType&&(e.cellElement.style.background="#0aa3a3")},children:[Object(C.jsx)(y.Selection,{mode:"single"}),Object(C.jsx)(y.Editing,{allowUpdating:!0,allowAdding:!1,allowDeleting:!1,mode:"cell",onChangesChange:function(e){return Y(e)}}),Object(C.jsx)(y.ColumnChooser,{enabled:!0,mode:"select"}),Object(C.jsx)(y.Column,{dataField:"familyParent",allowEditing:!1}),Object(C.jsx)(y.Column,{dataField:"id",allowEditing:!1}),Object(C.jsx)(y.Column,{caption:"SB",dataField:"subassembly",dataType:"boolean",allowEditing:!1}),Object(C.jsx)(y.Column,{caption:"FG",dataField:"finishGood",dataType:"boolean",allowEditing:!1}),Object(C.jsx)(y.Column,{dataField:"quantityRequested",allowEditing:!1}),Object(C.jsxs)(y.Column,{caption:"Quantity Planned",allowEditing:!1,children:[Object(C.jsx)(y.Column,{caption:"Current Line",dataField:"quantity",allowEditing:!1,cellRender:function(e){return function(e){var t=0;return e.data.days.map((function(e){t+=e.quantity})),Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{children:t})})}(e)}}),Object(C.jsx)(y.Column,{caption:"Other Lines",dataField:"otherLines",allowEditing:!1,cellRender:function(e){return function(e){var t=0,n=s;return 1===e.data.lineParent.length?t=0:n.line.map((function(n){n.name!==c.name&&e.data.lineParent.includes(n.name)&&n.product.map((function(n){n.days.map((function(a){n.id===e.data.id&&(t+=a.quantity)}))}))})),Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{children:t})})}(e)}})]}),Object(C.jsx)(y.Column,{dataField:"quantityRemained",allowEditing:!1,cellRender:function(e){return function(e){var t=0;return e.data.days.map((function(e){t+=e.quantity})),Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{children:e.data.quantityRequested>=t?e.data.quantityRequested-t:0})})}(e)}}),Object(C.jsx)(y.Column,{caption:"Quantity",dataField:"days[".concat(x,"].quantity"),allowEditing:!0}),Object(C.jsx)(y.Column,{caption:"Priority",dataField:"priority",dataType:"boolean",allowEditing:!1,cellRender:function(e){return t=e,Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(f.a,{gutter:24,children:[Object(C.jsx)(m.a,{span:8,children:Object(C.jsx)("div",{style:{paddingLeft:5,paddingRight:5},children:t.data.days[x].priority})}),Object(C.jsx)(m.a,{span:16,children:Object(C.jsx)(v.Button,{width:"auto",text:"Change",type:"normal",stylingMode:"outlined",onClick:function(e){return R(e,t)}})})]})});var t}})]})})},P=n(83),R=n(846),Y=function(e){var t=Object(o.d)(),n=Object(c.h)(),i=Object(o.e)(d.a.selectLoading),x=Object(o.e)(d.a.selectRecord),v=Object(a.useState)(!1),w=Object(j.a)(v,2),Y=w[0],D=w[1],F=Object(a.useState)(""),k=Object(j.a)(F,2),S=k[0],M=k[1],I=Object(a.useState)({}),T=Object(j.a)(I,2),q=T[0],z=T[1];Object(a.useEffect)((function(){Y||t(l.a.doFind(n.params.id))}),[!Y]);var B=Object(a.useState)([{familyParent:"",zapParent:"",lineParent:""}]),_=Object(j.a)(B,2),L=_[0],G=_[1],W=function(){var e=Object(p.a)(Object(u.a)().mark((function e(){var t,n,a;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{familyParent:"",zapParent:"",lineParent:""}],n={familyParent:"",zapParent:"",lineParent:""},e.next=4,P.a.find(x.config.id);case 4:(a=e.sent).family.map((function(e){e.linesId.map((function(i){n={familyParent:e.famId.famTitle,zapParent:"",lineParent:i.lineId.lineTitle},a.zapId.map((function(e){e.linesId.map((function(t){t.lineTitle===i.lineId.lineTitle&&(n.zapParent=e.zapTitle)}))})),t.push(n)}))})),t.shift(),G(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(Object(a.useEffect)((function(){!i&&x&&W()}),[!i&&x]),i||!x)return Object(C.jsx)(b.a,{});function A(){var e=new Date(null===x||void 0===x?void 0:x.year,0,1+7*((null===x||void 0===x?void 0:x.week)-1)),t=e.getDay(),n=e;return t<=4?n.setDate(e.getDate()-e.getDay()+1):n.setDate(e.getDate()+8-e.getDay()),n}var Q=function(e){var t=e.data.lineParent,n=[{priority:0,quantity:0,name:""}];x.line.map((function(a){a.name===t&&a.product.map((function(t){t.days.map((function(a,i){if(e.column.caption.toLowerCase().includes(a.day)&&t.days[i].quantity>0&&null!==t.days[i].priority){var o={priority:t.days[i].priority,quantity:t.days[i].quantity,name:t.id};n.push(o)}}))}))})),n.shift();var a=n.sort((function(e,t){return e.priority-t.priority}));return Object(C.jsx)(C.Fragment,{children:a.map((function(e){return Object(C.jsx)("div",{children:Object(C.jsx)("li",{children:"".concat(e.priority,". ").concat(e.name,": ").concat(e.quantity)})})}))})};return Object(C.jsxs)(g.a,{children:[Object(C.jsxs)(f.a,{gutter:24,children:[Boolean(x.name)&&Object(C.jsx)(m.a,{span:6,children:Object(C.jsx)(O.a.Item,Object(s.a)(Object(s.a)({},g.b),{},{label:Object(r.c)("entities.planning.fields.name"),children:x.name}))}),Boolean(x.year)&&Object(C.jsx)(m.a,{span:6,children:Object(C.jsx)(O.a.Item,Object(s.a)(Object(s.a)({},g.b),{},{label:Object(r.c)("entities.planning.fields.year"),children:x.year}))}),Boolean(x.week)&&Object(C.jsx)(m.a,{span:6,children:Object(C.jsx)(O.a.Item,Object(s.a)(Object(s.a)({},g.b),{},{label:Object(r.c)("entities.planning.fields.week"),children:x.week}))}),Boolean(x.status)&&Object(C.jsx)(m.a,{span:6,children:Object(C.jsx)(O.a.Item,Object(s.a)(Object(s.a)({},g.b),{},{label:Object(r.c)("entities.planning.fields.status"),children:Object(r.c)("entities.planning.enumerators.status.".concat(x.status))}))})]}),Object(C.jsxs)(y.DataGrid,{dataSource:L,allowColumnReordering:!0,columnWidth:"auto",showBorders:!0,width:"100%",columnResizingMode:"widget",showRowLines:!0,onCellClick:function(e){var t;"data"===(t=e).rowType&&"Line"!==t.column.caption&&(M(t.column.caption),z(t.data),D(!0))},onRowPrepared:function(e){0===e.groupIndex?e.rowElement.style.background="#0aa3a3":1===e.groupIndex&&(e.rowElement.style.background="#00383B")},children:[Object(C.jsx)(y.ColumnChooser,{enabled:!0,mode:"select"}),Object(C.jsx)(y.Selection,{mode:"single"}),Object(C.jsx)(y.GroupPanel,{visible:!1}),Object(C.jsx)(y.Grouping,{autoExpandAll:!0,expandMode:"rowClick"}),Object(C.jsx)(y.Column,{caption:"Zap",dataField:"zapParent",allowEditing:!1,groupIndex:0}),Object(C.jsx)(y.Column,{caption:"Family",dataField:"familyParent",allowEditing:!1,groupIndex:1}),Object(C.jsx)(y.Column,{caption:"Line",dataField:"lineParent",allowEditing:!1}),Object(C.jsx)(y.Column,{caption:"Monday: ".concat(h()(A()).format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return Q(e)}}),Object(C.jsx)(y.Column,{caption:"Tuesday: ".concat(h()(A()).add(1,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return Q(e)}}),Object(C.jsx)(y.Column,{caption:"Wednesday: ".concat(h()(A()).add(2,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return Q(e)}}),Object(C.jsx)(y.Column,{caption:"Thursday: ".concat(h()(A()).add(3,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return Q(e)}}),Object(C.jsx)(y.Column,{caption:"Friday: ".concat(h()(A()).add(4,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return Q(e)}}),Object(C.jsx)(y.Column,{caption:"Saturday: ".concat(h()(A()).add(5,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return Q(e)}}),Object(C.jsx)(y.Column,{caption:"Sunday: ".concat(h()(A()).add(6,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(e){return Q(e)}}),Object(C.jsx)(y.Scrolling,{}),Object(C.jsx)(y.Paging,{defaultPageSize:100}),Object(C.jsx)(y.Pager,{visible:!0,allowedPageSizes:!0,displayMode:"full",showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0}),Object(C.jsx)(y.Summary,{children:Object(C.jsx)(y.GroupItem,{column:"id",summaryType:"count"})})]}),Object(C.jsx)(R.a,{width:"auto",title:S,visible:Y,onOk:function(){D(!1)},onCancel:function(){D(!1)},children:Object(C.jsx)(E,{data:q,header:S})})]})},D=n(623),F=n(625),k=n(624);t.default=function(e){var t=Object(o.d)(),n=Object(c.h)(),i=Object(o.e)(d.a.selectLoading),s=Object(o.e)(d.a.selectRecord);return Object(a.useEffect)((function(){t(l.a.doFind(n.params.id))}),[]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(F.a,{items:[[Object(r.c)("dashboard.menu"),"/"],[Object(r.c)("entities.planning.menu"),"/planning"],[Object(r.c)("entities.planning.daily")]]}),Object(C.jsxs)(D.a,{children:[Object(C.jsxs)(f.a,{children:[Object(C.jsx)(m.a,{span:16,children:Object(C.jsx)(k.a,{children:Object(r.c)("entities.planning.daily")})}),Object(C.jsx)(m.a,{span:8,style:{textAlign:"end"}})]}),Object(C.jsx)(Y,{loading:i,record:s})]})]})}},623:function(e,t,n){"use strict";var a,i=n(183),o=n(184).a.div(a||(a=Object(i.a)(["\n  margin: 0px;\n  margin-top: 16px;\n  padding: 24px;\n  border-radius: 5px;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  overflow-y: hidden;\n"])));t.a=o},624:function(e,t,n){"use strict";var a,i=n(183),o=n(184).a.h1(a||(a=Object(i.a)(["\n  margin-bottom: 36px;\n"])));t.a=o},625:function(e,t,n){"use strict";var a=n(669),i=(n(1),n(95)),o=n(12);t.a=function(e){var t=function(e){return e.length>1};return Object(o.jsx)(a.a,{children:e.items.map((function(e){return Object(o.jsx)(a.a.Item,{children:t(e)?Object(o.jsx)(i.a,{to:e[1],children:e[0]}):e[0]},e[0])}))})}},636:function(e,t,n){"use strict";var a;function i(e){if("undefined"===typeof document)return 0;if(e||void 0===a){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),i=n.style;i.position="absolute",i.top="0",i.left="0",i.pointerEvents="none",i.visibility="hidden",i.width="200px",i.height="150px",i.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var o=t.offsetWidth;n.style.overflow="scroll";var c=t.offsetWidth;o===c&&(c=n.clientWidth),document.body.removeChild(n),a=o-c}return a}n.d(t,"a",(function(){return i}))},647:function(e,t,n){"use strict";var a=n(655),i=(n(1),n(12));t.a=function(e){return Object(i.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:Object(i.jsx)(a.a,{})})}},731:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var a,i=n(183),o=n(184).a.div(a||(a=Object(i.a)(["\n  padding: 24px;\n  padding-top: 0;\n  padding-bottom: 0;\n\n  .ant-form-item-label {\n    white-space: normal;\n  }\n\n  .ant-row {\n    margin-bottom: 8px;\n  }\n"]))),c={labelCol:{md:{span:6},lg:{span:4}},wrapperCol:{md:{span:18},lg:{span:12}}};t.a=o},944:function(e,t,n){"use strict";var a=n(5),i=function(e){return e.planning.view},o=Object(a.a)([i],(function(e){return e.record})),c={selectLoading:Object(a.a)([i],(function(e){return Boolean(e.loading)})),selectRecord:o,selectRaw:i};t.a=c}}]);