/*! For license information please see 77.e66e6686.chunk.js.LICENSE.txt */
(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[77],{1232:function(t,e,n){},1249:function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Button=void 0;var i=n(818),o=n(46),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._WidgetClass=i.default,e.independentEvents=["onClick","onContentReady","onDisposing","onInitialized"],e._templateProps=[{tmplOption:"template",render:"render",component:"component",keyFn:"keyFn"}],e}return a(e,t),Object.defineProperty(e.prototype,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e}(n(997).Component);e.Button=r,r.propTypes={accessKey:o.string,activeStateEnabled:o.bool,disabled:o.bool,elementAttr:o.object,focusStateEnabled:o.bool,height:o.oneOfType([o.func,o.number,o.string]),hint:o.string,hoverStateEnabled:o.bool,icon:o.string,onClick:o.func,onContentReady:o.func,onDisposing:o.func,onInitialized:o.func,onOptionChanged:o.func,rtlEnabled:o.bool,stylingMode:o.oneOfType([o.string,o.oneOf(["text","outlined","contained"])]),tabIndex:o.number,text:o.string,type:o.oneOfType([o.string,o.oneOf(["back","danger","default","normal","success"])]),useSubmitBehavior:o.bool,validationGroup:o.string,visible:o.bool,width:o.oneOfType([o.func,o.number,o.string])},e.default=r},1325:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n.n(a),o=n(43),r=n(36),c=n(4),l=n(223),d=n(964),s=n(0),u=n(2),p=n(3),j=n(23),b=n(647),f=n(815),m=n(816),y=n(1284),O=(n(1232),n(965)),g=n(731),x=n(106),h=n.n(x),v=n(1249),w=n(85),C=n(12),E=function(t){var e,n=Object(a.useState)({}),o=Object(j.a)(n,2),r=o[0],c=o[1],l=Object(a.useState)({}),d=Object(j.a)(l,2),s=d[0],b=d[1],y=Object(a.useState)(),g=Object(j.a)(y,2),x=g[0],h=g[1],E=window.location.pathname.split("planning/").pop().replace("/daily",""),P=function(){var n=Object(p.a)(Object(u.a)().mark((function n(){return Object(u.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.find(E);case 2:e=n.sent,b(e),e.line.map((function(e){e.name===t.data.lineParent&&(e.product.map((function(e){e.days.map((function(e,n){t.header.toLowerCase().includes(e.day)&&h(n)}))})),c(e))}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Object(a.useEffect)((function(){P()}),[t]);var Y=function(){var t=Object(p.a)(Object(u.a)().mark((function t(e,n){var a,i,o,c;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=0,c=s,t.next=4,s.line.map((function(t,e){t.name===r.name&&(i=e)}));case 4:return t.next=6,s.line[i].product.map((function(t,e){n.data.id===t.id&&(a=e)}));case 6:return t.next=8,r.product.map((function(t){null!==t.days[x].priority&&t.days[x].priority>o&&(o=t.days[x].priority)}));case 8:return null===c.line[i].product[a].days[x].priority?c.line[i].product[a].days[x].priority=o+1:c.line[i].product[a].days[x].priority!==o&&c.line[i].product.map((function(t){t.days[x].priority===o&&(t.days[x].priority=c.line[i].product[a].days[x].priority,c.line[i].product[a].days[x].priority=o)})),t.next=11,w.a.update(E,c);case 11:P();case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),D=function(){var t=Object(p.a)(Object(u.a)().mark((function t(e){var n,a,i;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=10;break}return i=s,t.next=4,s.line.map((function(t,e){t.name===r.name&&(a=e)}));case 4:return t.next=6,s.line[a].product.map((function(t,a){e[0].key.id===t.id&&(n=a)}));case 6:return i.line[a].product[n].days[x].quantity=Object.values(e[0].data)[0].quantity,t.next=9,w.a.update(E,i);case 9:P();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsx)(i.a.Fragment,{children:Object(C.jsxs)(O.DataGrid,{dataSource:r.product,showBorders:!0,columnAutoWidth:!0,allowColumnResizing:!0,columnResizingMode:"widget",children:[Object(C.jsx)(O.Selection,{mode:"single"}),Object(C.jsx)(O.Editing,{allowUpdating:!0,allowAdding:!1,allowDeleting:!1,mode:"cell",onChangesChange:function(t){return D(t)}}),Object(C.jsx)(O.ColumnChooser,{enabled:!0,mode:"select"}),Object(C.jsx)(O.Column,{dataField:"familyParent",allowEditing:!1}),Object(C.jsx)(O.Column,{dataField:"id",allowEditing:!1}),Object(C.jsx)(O.Column,{caption:"SB",dataField:"subassembly",dataType:"boolean",allowEditing:!1}),Object(C.jsx)(O.Column,{caption:"FG",dataField:"finishGood",dataType:"boolean",allowEditing:!1}),Object(C.jsx)(O.Column,{dataField:"quantityRequested",allowEditing:!1}),Object(C.jsxs)(O.Column,{caption:"Quantity Planned",allowEditing:!1,children:[Object(C.jsx)(O.Column,{caption:"Current Line",dataField:"quantity",allowEditing:!1,cellRender:function(t){return function(t){var e=0;return t.data.days.map((function(t){e+=t.quantity})),Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{children:e})})}(t)}}),Object(C.jsx)(O.Column,{caption:"Other Lines",dataField:"otherLines",allowEditing:!1,cellRender:function(t){return function(t){var e=0,n=s;return 1===t.data.lineParent.length?e=0:n.line.map((function(n){n.name!==r.name&&t.data.lineParent.includes(n.name)&&n.product.map((function(n){n.days.map((function(a){n.id===t.data.id&&(e+=a.quantity)}))}))})),Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{children:e})})}(t)}})]}),Object(C.jsx)(O.Column,{dataField:"quantityRemained",allowEditing:!1,cellRender:function(t){return function(t){var e=0;return t.data.days.map((function(t){e+=t.quantity})),Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("div",{children:t.data.quantityRequested>=e?t.data.quantityRequested-e:0})})}(t)}}),Object(C.jsx)(O.Column,{caption:"Quantity",dataField:"days[".concat(x,"].quantity"),allowEditing:!0}),Object(C.jsx)(O.Column,{caption:"Priority",dataField:"priority",dataType:"boolean",allowEditing:!1,cellRender:function(t){return e=t,Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(f.a,{gutter:24,children:[Object(C.jsx)(m.a,{span:8,children:Object(C.jsx)("div",{style:{paddingLeft:5,paddingRight:5},children:e.data.days[x].priority})}),Object(C.jsx)(m.a,{span:16,children:Object(C.jsx)(v.Button,{width:"auto",text:"Change",type:"normal",stylingMode:"outlined",onClick:function(t){return Y(t,e)}})})]})});var e}})]})})},P=n(83),Y=n(846),D=function(t){var e=Object(a.useState)(!1),n=Object(j.a)(e,2),i=n[0],o=n[1],r=Object(a.useState)(""),l=Object(j.a)(r,2),d=l[0],x=l[1],v=Object(a.useState)({}),w=Object(j.a)(v,2),D=w[0],F=w[1],R=t.record,S=t.loading,k=Object(a.useState)([{familyParent:"",zapParent:"",lineParent:""}]),I=Object(j.a)(k,2),M=I[0],q=I[1],T=function(){var t=Object(p.a)(Object(u.a)().mark((function t(){var e,n,a;return Object(u.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[{familyParent:"",zapParent:"",lineParent:""}],n={familyParent:"",zapParent:"",lineParent:""},t.next=4,P.a.find(R.config.id);case 4:(a=t.sent).family.map((function(t){t.linesId.map((function(i){n={familyParent:t.famId.famTitle,zapParent:"",lineParent:i.lineId.lineTitle},a.zapId.map((function(t){t.linesId.map((function(e){e.lineTitle===i.lineId.lineTitle&&(n.zapParent=t.zapTitle)}))})),e.push(n)}))})),e.shift(),q(e);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(Object(a.useEffect)((function(){!S&&R&&T()}),[!S&&R&&!i]),S||!R)return Object(C.jsx)(b.a,{});function z(){var t=new Date(null===R||void 0===R?void 0:R.year,0,1+7*((null===R||void 0===R?void 0:R.week)-1)),e=t.getDay(),n=t;return e<=4?n.setDate(t.getDate()-t.getDay()+1):n.setDate(t.getDate()+8-t.getDay()),n}var B=function(t){var e=t.data.lineParent,n=[{priority:0,quantity:0,name:""}];R.line.map((function(a){a.name===e&&a.product.map((function(e){e.days.map((function(a,i){if(t.column.caption.toLowerCase().includes(a.day)&&e.days[i].quantity>0&&null!==e.days[i].priority){var o={priority:e.days[i].priority,quantity:e.days[i].quantity,name:e.id};n.push(o)}}))}))})),n.shift();var a=n.sort((function(t,e){return t.priority-e.priority}));return Object(C.jsx)(C.Fragment,{children:a.map((function(t){return Object(C.jsx)("div",{children:Object(C.jsx)("li",{children:"".concat(t.priority,". ").concat(t.name,": ").concat(t.quantity)})})}))})};return Object(C.jsxs)(g.a,{children:[Object(C.jsxs)(f.a,{gutter:24,children:[Boolean(R.name)&&Object(C.jsx)(m.a,{span:6,children:Object(C.jsx)(y.a.Item,Object(s.a)(Object(s.a)({},g.b),{},{label:Object(c.c)("entities.planning.fields.name"),children:R.name}))}),Boolean(R.year)&&Object(C.jsx)(m.a,{span:6,children:Object(C.jsx)(y.a.Item,Object(s.a)(Object(s.a)({},g.b),{},{label:Object(c.c)("entities.planning.fields.year"),children:R.year}))}),Boolean(R.week)&&Object(C.jsx)(m.a,{span:6,children:Object(C.jsx)(y.a.Item,Object(s.a)(Object(s.a)({},g.b),{},{label:Object(c.c)("entities.planning.fields.week"),children:R.week}))}),Boolean(R.status)&&Object(C.jsx)(m.a,{span:6,children:Object(C.jsx)(y.a.Item,Object(s.a)(Object(s.a)({},g.b),{},{label:Object(c.c)("entities.planning.fields.status"),children:Object(c.c)("entities.planning.enumerators.status.".concat(R.status))}))})]}),Object(C.jsxs)(O.DataGrid,{dataSource:M,allowColumnReordering:!0,columnWidth:"auto",showBorders:!0,width:"100%",onCellClick:function(t){var e;"data"===(e=t).rowType&&"Line"!==e.column.caption&&(x(e.column.caption),F(e.data),o(!0))},onRowPrepared:function(t){0===t.groupIndex?t.rowElement.style.background="#0aa3a3":1===t.groupIndex&&(t.rowElement.style.background="#00383B")},children:[Object(C.jsx)(O.ColumnChooser,{enabled:!0,mode:"select"}),Object(C.jsx)(O.Selection,{mode:"single"}),Object(C.jsx)(O.GroupPanel,{visible:!1}),Object(C.jsx)(O.Grouping,{autoExpandAll:!1,expandMode:"rowClick"}),Object(C.jsx)(O.Column,{caption:"Zap",dataField:"zapParent",allowEditing:!1,groupIndex:0}),Object(C.jsx)(O.Column,{caption:"Family",dataField:"familyParent",allowEditing:!1,groupIndex:1}),Object(C.jsx)(O.Column,{caption:"Line",dataField:"lineParent",allowEditing:!1}),Object(C.jsx)(O.Column,{caption:"Monday: ".concat(h()(z()).format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(t){return B(t)}}),Object(C.jsx)(O.Column,{caption:"Tuesday: ".concat(h()(z()).add(1,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(t){return B(t)}}),Object(C.jsx)(O.Column,{caption:"Wednesday: ".concat(h()(z()).add(2,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(t){return B(t)}}),Object(C.jsx)(O.Column,{caption:"Thursday: ".concat(h()(z()).add(3,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(t){return B(t)}}),Object(C.jsx)(O.Column,{caption:"Friday: ".concat(h()(z()).add(4,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(t){return B(t)}}),Object(C.jsx)(O.Column,{caption:"Saturday: ".concat(h()(z()).add(5,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(t){return B(t)}}),Object(C.jsx)(O.Column,{caption:"Sunday: ".concat(h()(z()).add(6,"days").format("DD/MM/YYYY")),allowEditing:!1,cellRender:function(t){return B(t)}}),Object(C.jsx)(O.Scrolling,{}),Object(C.jsx)(O.Paging,{defaultPageSize:100}),Object(C.jsx)(O.Pager,{visible:!0,allowedPageSizes:!0,displayMode:"full",showPageSizeSelector:!0,showInfo:!0,showNavigationButtons:!0}),Object(C.jsx)(O.Summary,{children:Object(C.jsx)(O.GroupItem,{column:"id",summaryType:"count"})})]}),Object(C.jsx)(Y.a,{width:"auto",title:d,visible:i,onOk:function(){o(!1)},onCancel:function(){o(!1)},children:Object(C.jsx)(E,{data:D,header:d})})]})},F=n(623),R=n(625),S=n(624);e.default=function(t){var e=Object(o.d)(),n=Object(r.h)(),i=Object(o.e)(d.a.selectLoading),s=Object(o.e)(d.a.selectRecord);return Object(a.useEffect)((function(){e(l.a.doFind(n.params.id))}),[]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(R.a,{items:[[Object(c.c)("dashboard.menu"),"/"],[Object(c.c)("entities.planning.menu"),"/planning"],[Object(c.c)("entities.planning.daily")]]}),Object(C.jsxs)(F.a,{children:[Object(C.jsxs)(f.a,{children:[Object(C.jsx)(m.a,{span:16,children:Object(C.jsx)(S.a,{children:Object(c.c)("entities.planning.daily")})}),Object(C.jsx)(m.a,{span:8,style:{textAlign:"end"}})]}),Object(C.jsx)(D,{loading:i,record:s})]})]})}},623:function(t,e,n){"use strict";var a,i=n(183),o=n(184).a.div(a||(a=Object(i.a)(["\n  margin: 0px;\n  margin-top: 16px;\n  padding: 24px;\n  border-radius: 5px;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  overflow-y: hidden;\n"])));e.a=o},624:function(t,e,n){"use strict";var a,i=n(183),o=n(184).a.h1(a||(a=Object(i.a)(["\n  margin-bottom: 36px;\n"])));e.a=o},625:function(t,e,n){"use strict";var a=n(669),i=(n(1),n(95)),o=n(12);e.a=function(t){var e=function(t){return t.length>1};return Object(o.jsx)(a.a,{children:t.items.map((function(t){return Object(o.jsx)(a.a.Item,{children:e(t)?Object(o.jsx)(i.a,{to:t[1],children:t[0]}):t[0]},t[0])}))})}},636:function(t,e,n){"use strict";var a;function i(t){if("undefined"===typeof document)return 0;if(t||void 0===a){var e=document.createElement("div");e.style.width="100%",e.style.height="200px";var n=document.createElement("div"),i=n.style;i.position="absolute",i.top="0",i.left="0",i.pointerEvents="none",i.visibility="hidden",i.width="200px",i.height="150px",i.overflow="hidden",n.appendChild(e),document.body.appendChild(n);var o=e.offsetWidth;n.style.overflow="scroll";var r=e.offsetWidth;o===r&&(r=n.clientWidth),document.body.removeChild(n),a=o-r}return a}n.d(e,"a",(function(){return i}))},647:function(t,e,n){"use strict";var a=n(655),i=(n(1),n(12));e.a=function(t){return Object(i.jsx)("div",{style:{width:"100%",marginTop:"24px",marginBottom:"24px",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:Object(i.jsx)(a.a,{})})}},731:function(t,e,n){"use strict";n.d(e,"b",(function(){return r}));var a,i=n(183),o=n(184).a.div(a||(a=Object(i.a)(["\n  padding: 24px;\n  padding-top: 0;\n  padding-bottom: 0;\n\n  .ant-form-item-label {\n    white-space: normal;\n  }\n\n  .ant-row {\n    margin-bottom: 8px;\n  }\n"]))),r={labelCol:{md:{span:6},lg:{span:4}},wrapperCol:{md:{span:18},lg:{span:12}}};e.a=o},964:function(t,e,n){"use strict";var a=n(5),i=function(t){return t.planning.view},o=Object(a.a)([i],(function(t){return t.record})),r={selectLoading:Object(a.a)([i],(function(t){return Boolean(t.loading)})),selectRecord:o,selectRaw:i};e.a=r}}]);