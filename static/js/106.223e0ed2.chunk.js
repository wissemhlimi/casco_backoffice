(this["webpackJsonpapp-frontend"]=this["webpackJsonpapp-frontend"]||[]).push([[106],{1224:function(e,t,n){"use strict";var a=n(5),c=function(e){return e.planning.form},r=Object(a.a)([c],(function(e){return e.record})),w={selectInitLoading:Object(a.a)([c],(function(e){return Boolean(e.initLoading)})),selectSaveLoading:Object(a.a)([c],(function(e){return Boolean(e.saveLoading)})),selectRecord:r,selectRaw:c};t.a=w},1225:function(e,t,n){"use strict";var a=n(5),c=function(e){return e.planning.view},r=Object(a.a)([c],(function(e){return e.record})),w={selectLoading:Object(a.a)([c],(function(e){return Boolean(e.loading)})),selectRecord:r,selectRaw:c};t.a=w},1636:function(e,t,n){},1919:function(e,t,n){"use strict";n.r(t);var a=n(209),c=n(11),r=n(2),w=n(46),i=n(682),D=n(3),o=n(678),T=n(0),s=(n(1636),n(1637),n(937)),Z=n(681),d=n(1072),u=n(1073),j=n(1864),l=n(225),b=n(223),p=n(653),O=n(679),m=n(814),f=n(850),x=n(999),g=n(1305),h=n.n(g),v=n(1225),I=n(37),y=n(240),k=function(e){var t=Object(w.d)(),n=Object(I.h)(),i=Object(r.useState)([{id:"",parentId:"",title:"",start:new Date("2019-02-21T05:00:00.000Z"),end:new Date("2019-07-04T12:00:00.000Z"),progress:31}]),o=Object(a.a)(i,2),k=o[0],C=o[1];console.log("record",e.record);var S=Object(w.e)(v.a.selectLoading),L=Object(r.useState)((function(){return{calendar:(e.record||{}).calendar}})),H=Object(a.a)(L,1)[0],E=Object(p.c)({mode:"all",defaultValues:H});Object(r.useEffect)((function(){t(y.a.doFind(n.params.id))}),[]),Object(r.useEffect)((function(){!S&&e.record&&R()}),[!S&&e.record&&e.selectedDay]);var R=function(){var t=e.record.calendar.fraquence,n=[{id:1,parentId:0,title:e.record.name,start:new Date(B().setHours(6)),end:new Date(B().setHours(18)),progress:31}],a=2,c=new Date(B().setHours(6));e.record.line.map((function(r){var w=a;a++;var i={};i.id=w,i.parentId=1,i.title=r.name,i.start=new Date(c),i.end=new Date(c),i.progress=0,r.product.map((function(r){r.days.map((function(i){if(e.selectedDay.toLowerCase().includes(i.day)){var D=A(t,i.quantity);if(D){D=Math.ceil(D);var o,T={};T.id=a,a++,T.parentId=w,T.title=r.id,T.start=new Date(c),c=new Date(c.getTime()+t*D*6e4),T.end=new Date(c),T.progress=0;var s,Z={};if(V(T))s=T.end.getHours()<=13?q(T.end,12):60,o=T.end,T.end=new Date(B().setHours(12)),Z.id=a,a++,Z.parentId=w,Z.title=r.id,Z.start=new Date(B().setHours(13)),Z.end=z(o,s);n.push(T),J(Z)||(n.push(Z),Z={})}}}))})),n.push(i)})),C(n),console.log(n)},F=function(t){var n,a=Object(T.a)(Object(T.a)({},e.record),t);e.onSubmit(null===e||void 0===e||null===(n=e.record)||void 0===n?void 0:n.id,a)},A=function(e,t){var n=t/100*60;if(!n)return null;var a=n/e;return 0!=a?a:void 0},B=function(){var t=e.selectedDay.split(": ")[1].trim().split("/"),n="".concat(t[1],"/").concat(t[0],"/").concat(t[2]);return new Date(n)},V=function(e){var t=e.start.getHours(),n=e.end.getHours();return t<13&&n>=12},q=function(e,t){var n=new Date(e.getTime()-60*t*60*1e3);return Math.round((e.getTime()-n.getTime())/6e4)},z=function(e,t){var n=e.getTime()+60*t*1e3;return new Date(n)},J=function(e){return 0===Object.keys(e).length};return Object(c.jsx)(Z.a,{children:Object(c.jsx)(p.a,Object(T.a)(Object(T.a)({},E),{},{children:Object(c.jsxs)("form",{onSubmit:E.handleSubmit(F),children:[Object(c.jsxs)(d.a,{gutter:24,children:[Object(c.jsx)(u.a,{span:16,children:Object(c.jsx)(O.a,{children:e.title})}),Object(c.jsx)(u.a,{span:8,style:{textAlign:"end",paddingLeft:"100px",paddingRight:"0px"},children:Object(c.jsxs)(j.a.Item,Object(T.a)(Object(T.a)({className:"form-buttons"},Z.c),{},{children:[Object(c.jsx)(l.a,{title:Object(D.c)("common.save"),children:Object(c.jsx)(b.a,{type:"primary",onClick:E.handleSubmit(F),icon:Object(c.jsx)(m.a,{})})}),Object(c.jsx)(l.a,{title:Object(D.c)("common.reset"),children:Object(c.jsx)(b.a,{onClick:function(){Object.keys(H).forEach((function(e){E.setValue(e,H[e])}))},icon:Object(c.jsx)(f.a,{})})}),e.onCancel&&Object(c.jsx)(l.a,{title:Object(D.c)("common.cancel"),children:Object(c.jsx)(b.a,{onClick:function(){return e.onCancel()},icon:Object(c.jsx)(x.a,{})})})]}))})]}),Object(c.jsx)(d.a,{gutter:24,children:Object(c.jsx)(u.a,{span:24,children:Object(c.jsxs)(h.a,{taskListWidth:500,scaleType:"hours",height:700,children:[Object(c.jsx)(g.Tasks,{dataSource:k}),Object(c.jsxs)(g.Toolbar,{children:[Object(c.jsx)(g.Item,{name:"undo"}),Object(c.jsx)(g.Item,{name:"redo"}),Object(c.jsx)(g.Item,{name:"separator"}),Object(c.jsx)(g.Item,{name:"collapseAll"}),Object(c.jsx)(g.Item,{name:"expandAll"}),Object(c.jsx)(g.Item,{name:"separator"}),Object(c.jsx)(g.Item,{name:"addTask"}),Object(c.jsx)(g.Item,{name:"deleteTask"}),Object(c.jsx)(g.Item,{name:"separator"}),Object(c.jsx)(g.Item,{name:"zoomIn"}),Object(c.jsx)(g.Item,{name:"zoomOut"})]}),Object(c.jsx)(s.Column,{dataField:"title",caption:"Subject",width:300}),Object(c.jsx)(s.Column,{dataField:"start",caption:"Start Date"}),Object(c.jsx)(s.Column,{dataField:"end",caption:"End Date"}),Object(c.jsx)(g.Validation,{autoUpdateParentTasks:!0}),Object(c.jsx)(g.Editing,{enabled:!0}),Object(c.jsx)(s.Scrolling,{})]})})})]})}))})},C=(new Date("2019-02-21T05:00:00.000Z"),new Date("2019-07-04T12:00:00.000Z"),new Date("2019-02-21T05:00:00.000Z"),new Date("2019-02-26T09:00:00.000Z"),new Date("2019-02-21T05:00:00.000Z"),new Date("2019-02-21T09:00:00.000Z"),new Date("2019-02-21T10:00:00.000Z"),new Date("2019-02-22T09:00:00.000Z"),new Date("2019-02-22T10:00:00.000Z"),new Date("2019-02-25T09:00:00.000Z"),new Date("2019-02-25T10:00:00.000Z"),new Date("2019-02-26T09:00:00.000Z"),new Date("2019-02-26T09:00:00.000Z"),new Date("2019-02-26T09:00:00.000Z"),new Date("2019-02-26T10:00:00.000Z"),new Date("2019-03-18T09:00:00.000Z"),new Date("2019-02-26T10:00:00.000Z"),new Date("2019-03-05T09:00:00.000Z"),new Date("2019-03-05T10:00:00.000Z"),new Date("2019-03-08T09:00:00.000Z"),new Date("2019-03-08T10:00:00.000Z"),new Date("2019-03-12T09:00:00.000Z"),new Date("2019-03-12T10:00:00.000Z"),new Date("2019-03-12T14:00:00.000Z"),new Date("2019-03-13T05:00:00.000Z"),new Date("2019-03-13T14:00:00.000Z"),new Date("2019-03-14T05:00:00.000Z"),new Date("2019-03-14T14:00:00.000Z"),new Date("2019-03-15T05:00:00.000Z"),new Date("2019-03-15T09:00:00.000Z"),new Date("2019-03-15T10:00:00.000Z"),new Date("2019-03-18T09:00:00.000Z"),new Date("2019-03-18T09:00:00.000Z"),new Date("2019-03-18T09:00:00.000Z"),new Date("2019-03-18T10:00:00.000Z"),new Date("2019-04-05T14:00:00.000Z"),new Date("2019-03-18T10:00:00.000Z"),new Date("2019-03-20T09:00:00.000Z"),new Date("2019-03-20T10:00:00.000Z"),new Date("2019-03-27T09:00:00.000Z"),new Date("2019-03-27T10:00:00.000Z"),new Date("2019-04-02T09:00:00.000Z"),new Date("2019-04-02T10:00:00.000Z"),new Date("2019-04-04T09:00:00.000Z"),new Date("2019-04-04T10:00:00.000Z"),new Date("2019-04-05T09:00:00.000Z"),new Date("2019-04-05T10:00:00.000Z"),new Date("2019-04-05T14:00:00.000Z"),new Date("2019-04-05T14:00:00.000Z"),new Date("2019-04-05T14:00:00.000Z"),new Date("2019-04-08T05:00:00.000Z"),new Date("2019-05-07T12:00:00.000Z"),new Date("2019-04-08T05:00:00.000Z"),new Date("2019-04-08T14:00:00.000Z"),new Date("2019-04-09T05:00:00.000Z"),new Date("2019-04-09T14:00:00.000Z"),new Date("2019-04-10T05:00:00.000Z"),new Date("2019-04-10T14:00:00.000Z"),new Date("2019-04-11T05:00:00.000Z"),new Date("2019-05-01T14:00:00.000Z"),new Date("2019-04-16T12:00:00.000Z"),new Date("2019-05-07T12:00:00.000Z"),new Date("2019-05-07T12:00:00.000Z"),new Date("2019-05-07T12:00:00.000Z"),new Date("2019-04-08T05:00:00.000Z"),new Date("2019-06-13T12:00:00.000Z"),new Date("2019-04-08T05:00:00.000Z"),new Date("2019-04-11T14:00:00.000Z"),new Date("2019-04-08T05:00:00.000Z"),new Date("2019-04-11T14:00:00.000Z"),new Date("2019-05-07T12:00:00.000Z"),new Date("2019-05-28T12:00:00.000Z"),new Date("2019-05-07T12:00:00.000Z"),new Date("2019-05-14T12:00:00.000Z"),new Date("2019-05-14T12:00:00.000Z"),new Date("2019-05-16T12:00:00.000Z"),new Date("2019-05-16T12:00:00.000Z"),new Date("2019-05-21T12:00:00.000Z"),new Date("2019-05-21T12:00:00.000Z"),new Date("2019-05-24T12:00:00.000Z"),new Date("2019-05-24T12:00:00.000Z"),new Date("2019-05-28T12:00:00.000Z"),new Date("2019-05-28T12:00:00.000Z"),new Date("2019-05-28T12:00:00.000Z"),new Date("2019-05-28T12:00:00.000Z"),new Date("2019-06-13T12:00:00.000Z"),new Date("2019-05-28T12:00:00.000Z"),new Date("2019-06-04T12:00:00.000Z"),new Date("2019-06-04T12:00:00.000Z"),new Date("2019-06-06T12:00:00.000Z"),new Date("2019-06-06T12:00:00.000Z"),new Date("2019-06-11T12:00:00.000Z"),new Date("2019-06-11T12:00:00.000Z"),new Date("2019-06-13T12:00:00.000Z"),new Date("2019-06-13T12:00:00.000Z"),new Date("2019-06-13T12:00:00.000Z"),new Date("2019-04-08T05:00:00.000Z"),new Date("2019-06-10T12:00:00.000Z"),new Date("2019-04-08T05:00:00.000Z"),new Date("2019-04-10T14:00:00.000Z"),new Date("2019-04-08T05:00:00.000Z"),new Date("2019-04-10T14:00:00.000Z"),new Date("2019-04-08T05:00:00.000Z"),new Date("2019-04-09T14:00:00.000Z"),new Date("2019-05-07T12:00:00.000Z"),new Date("2019-05-28T12:00:00.000Z"),new Date("2019-05-28T12:00:00.000Z"),new Date("2019-06-03T12:00:00.000Z"),new Date("2019-06-03T12:00:00.000Z"),new Date("2019-06-06T12:00:00.000Z"),new Date("2019-06-06T12:00:00.000Z"),new Date("2019-06-10T12:00:00.000Z"),new Date("2019-06-10T12:00:00.000Z"),new Date("2019-06-10T12:00:00.000Z"),new Date("2019-04-08T05:00:00.000Z"),new Date("2019-05-20T09:00:00.000Z"),new Date("2019-04-08T05:00:00.000Z"),new Date("2019-04-08T14:00:00.000Z"),new Date("2019-04-22T10:00:00.000Z"),new Date("2019-05-13T09:00:00.000Z"),new Date("2019-05-13T10:00:00.000Z"),new Date("2019-05-16T09:00:00.000Z"),new Date("2019-05-16T10:00:00.000Z"),new Date("2019-05-20T09:00:00.000Z"),new Date("2019-04-08T05:00:00.000Z"),new Date("2019-04-09T14:00:00.000Z"),new Date("2019-04-22T10:00:00.000Z"),new Date("2019-05-13T09:00:00.000Z"),new Date("2019-05-13T10:00:00.000Z"),new Date("2019-05-15T09:00:00.000Z"),new Date("2019-05-15T10:00:00.000Z"),new Date("2019-05-17T09:00:00.000Z"),new Date("2019-05-20T09:00:00.000Z"),new Date("2019-05-20T09:00:00.000Z"),new Date("2019-03-18T10:00:00.000Z"),new Date("2019-06-24T12:00:00.000Z"),new Date("2019-03-18T10:00:00.000Z"),new Date("2019-03-19T09:00:00.000Z"),new Date("2019-03-19T10:00:00.000Z"),new Date("2019-03-20T09:00:00.000Z"),new Date("2019-06-13T12:00:00.000Z"),new Date("2019-06-14T12:00:00.000Z"),new Date("2019-06-14T12:00:00.000Z"),new Date("2019-06-21T12:00:00.000Z"),new Date("2019-06-21T12:00:00.000Z"),new Date("2019-06-24T12:00:00.000Z"),new Date("2019-06-24T12:00:00.000Z"),new Date("2019-06-24T12:00:00.000Z"),new Date("2019-06-24T12:00:00.000Z"),new Date("2019-07-01T12:00:00.000Z"),new Date("2019-06-24T12:00:00.000Z"),new Date("2019-06-25T12:00:00.000Z"),new Date("2019-06-25T12:00:00.000Z"),new Date("2019-06-26T12:00:00.000Z"),new Date("2019-06-26T12:00:00.000Z"),new Date("2019-06-27T12:00:00.000Z"),new Date("2019-06-27T12:00:00.000Z"),new Date("2019-06-28T12:00:00.000Z"),new Date("2019-06-28T12:00:00.000Z"),new Date("2019-07-01T12:00:00.000Z"),new Date("2019-07-01T12:00:00.000Z"),new Date("2019-07-01T12:00:00.000Z"),new Date("2019-07-01T12:00:00.000Z"),new Date("2019-07-04T12:00:00.000Z"),new Date("2019-07-01T12:00:00.000Z"),new Date("2019-07-02T12:00:00.000Z"),new Date("2019-07-02T12:00:00.000Z"),new Date("2019-07-03T12:00:00.000Z"),new Date("2019-07-03T12:00:00.000Z"),new Date("2019-07-04T12:00:00.000Z"),new Date("2019-07-04T12:00:00.000Z"),new Date("2019-07-04T12:00:00.000Z"),new Date("2019-07-04T12:00:00.000Z"),new Date("2019-07-04T12:00:00.000Z"),n(1224)),S=n(7),L=n(123);t.default=function(e){var t=e.location&&e.location.state||"",n=Object(r.useState)(!1),T=Object(a.a)(n,2),s=(T[0],T[1]),Z=Object(w.d)(),d=Object(I.h)(),u=Object(w.e)(C.a.selectRecord),j=Object(D.c)("entities.planning.hourly");return Object(r.useEffect)((function(){Z(L.a.doInit(d.params.id)),s(!0)}),[Z,d.params.id]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(i.a,{items:[[Object(D.c)("dashboard.menu"),"/"],[Object(D.c)("entities.planning.menu"),"/planning"],[j]]}),Object(c.jsx)(o.a,{children:Object(c.jsx)(k,{title:j,record:u,selectedDay:t,onCancel:function(){return Object(S.b)().push("/planning")}})})]})}},678:function(e,t,n){"use strict";var a=n(194);function c(){var e=Object(a.a)(["\n  margin: 0px;\n  margin-top: 16px;\n  padding: 24px;\n  border-radius: 5px;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  overflow-y: hidden;\n"]);return c=function(){return e},e}var r=n(195).a.div(c());t.a=r},679:function(e,t,n){"use strict";var a=n(194);function c(){var e=Object(a.a)(["\n  margin-bottom: 36px;\n"]);return c=function(){return e},e}var r=n(195).a.h1(c());t.a=r},681:function(e,t,n){"use strict";n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return i}));var a=n(194);function c(){var e=Object(a.a)(["\n  padding: 24px;\n  padding-top: 0;\n  padding-bottom: 0;\n\n  .ant-form-item-label {\n    white-space: normal;\n  }\n\n  .ant-form-item-with-help {\n    margin-bottom: 24px;\n  }\n\n  .form-buttons {\n    .ant-btn {\n      margin-top: 8px;\n      margin-right: 8px;\n    }\n  }\n"]);return c=function(){return e},e}var r=n(195).a.div(c()),w={labelCol:{xs:{span:24},sm:{span:24},md:{span:6},lg:{span:4}},wrapperCol:{xs:{span:24},sm:{span:24},md:{span:18},lg:{span:12}}},i={wrapperCol:{md:{span:18,offset:6},lg:{span:12,offset:4}}};t.a=r},682:function(e,t,n){"use strict";var a=n(11),c=n(773),r=(n(2),n(103));t.a=function(e){var t=function(e){return e.length>1};return Object(a.jsx)(c.a,{children:e.items.map((function(e){return Object(a.jsx)(c.a.Item,{children:t(e)?Object(a.jsx)(r.a,{to:e[1],children:e[0]}):e[0]},e[0])}))})}}}]);